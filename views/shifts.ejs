<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="GLEM-touch-icon" sizes="76x76" href="img/Logo.png">
  <link rel="shortcut icon" type="image/x-icon" href="https://i.ibb.co/Vm7PGwB/Logo.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    Glem-Tech
  </title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
    name='viewport' />
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
  <!-- CSS Files -->
  <link href="css/material-dashboard.css?v=2.1.0" rel="stylesheet" />
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="demo/demo.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body class="dark-edition">
  <div class="wrapper">
    <div class="sidebar" data-color="purple" data-background-color="black" data-image="img/sidebar-2.jpg">
      <!--
        Tip 1: You can change the color of the sidebar using: data-color="purple | azure | green | orange | danger"

        Tip 2: you can also add an image using data-image tag
    -->
      <div class="logo"><a href="javascript:void(0)" class="simple-text logo-normal">
          <div className="rating">
            <h4>My Rate:</h4>
            <span class="fa fa-star-o checked "></span>
            <span class="fa fa-star-o checked"></span>
            <span class="fa fa-star-o checked"></span>
            <span class="fa fa-star orange"></span>
            <span class="fa fa-star"></span>
          </div>
        </a>
      </div>
      <div class="sidebar-wrapper">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="./dashboard">
              <i class="material-icons">dashboard</i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="nav-item active" id="shifts">
            <a class="nav-link" href="./shifts">
              <i class="material-icons">content_paste</i>
              <p>Shifts</p>
            </a>
          </li>
          <li class="nav-item " id="workHistory">
            <a class="nav-link" href="./workHistory">
              <i class="material-icons">library_books</i>
              <p>Work History</p>
            </a>
          </li>
          <li class="nav-item " id="absences">
            <a class="nav-link" href="./absences">
              <i class="material-icons">content_paste</i>
              <p>Absences</p>
            </a>
          </li>
          <li class="nav-item " id="userProfile">
            <a class="nav-link" href="./user">
              <i class="material-icons">person</i>
              <p>User Profile</p>
            </a>
          </li>
          <li class="nav-item " id="recruit">
            <a class="nav-link" href="./recruit">
              <i class="material-icons">person</i>
              <p>Recruit</p>
            </a>
          </li>
          <li class="nav-item " id="trackingWorkers">
            <a class="nav-link" href="./trackingWorkers">
              <i class="material-icons">person</i>
              <p>Tracking Workers</p>
            </a>
          </li>
          <li class="nav-item " id="statistics">
            <a class="nav-link" href="./statistics">
              <i class="material-icons">person</i>
              <p>Statistics</p>
            </a>
          </li>
          <li class="nav-item " id="searchWorker">
            <a class="nav-link" href="./searchWorker">
              <i class="material-icons">person</i>
              <p>Search Worker</p>
            </a>
          </li>
          <li class="nav-item " id="hiringHistory">
            <a class="nav-link" href="./hiringHistory">
              <i class="material-icons">person</i>
              <p>Hiring History</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top " id="navigation-example">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <a class="navbar-brand" href="javascript:void(0)">
              <h3>Shifts</h3>
            </a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index"
            aria-expanded="false" aria-label="Toggle navigation" data-target="#navigation-example">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end">
            <form class="navbar-form">
              <div class="input-group no-border">
                <input type="text" value="" class="form-control" placeholder="Search...">
                <button type="submit" class="btn btn-default btn-round btn-just-icon">
                  <i class="material-icons">search</i>
                  <div class="ripple-container"></div>
                </button>
              </div>
            </form>
            <ul class="navbar-nav">

              <!-- <li class="nav-item dropdown">
                <a class="nav-link" href="javscript:void(0)" id="navbarDropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">notifications</i>
                  <span class="notification">5</span>
                  <p class="d-lg-none d-md-block">
                    Some Actions
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="javascript:void(0)">Mike John responded to your email</a>
                  <a class="dropdown-item" href="javascript:void(0)">You have 5 new tasks</a>
                  <a class="dropdown-item" href="javascript:void(0)">You're now friend with Andrew</a>
                  <a class="dropdown-item" href="javascript:void(0)">Another Notification</a>
                  <a class="dropdown-item" href="javascript:void(0)">Another One</a>
                </div>
              </li> -->
              <li class="nav-item dropdown">
                <a class="nav-link" href="javscript:void(0)" id="navbarDropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">person</i>
                  <p class="d-lg-none d-md-block">
                    Account
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item fa fa-sign-out" href="\" id="logout_btn">
                    <span style="margin-left: 6px;"> Logout </span>
                  </a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->

      <div class="content" style="display: grid;padding: 1rem 0;">
        <div class="container">
          <%for (let i=0,len=shifts.length;len>i;++i) { %>
            <div name="nice-card" class="row justify-content-center" style="padding:0.5rem;" id="<%= shifts[i]._id %>">

              <div class="col-md-8">
                <div class="card card-body" style="border-radius: 15px;margin: 0;">
                  <div class="row">

                    <div class="col-md-4">
                      <label style="font-size: 18px;">Where : <%= shifts[i].where %> </label>
                    </div>

                    <div class="col-md-4">
                      <label style="font-size: 18px;">Date : <%= shifts[i].startWork %></label>
                    </div>

                    <div class="col-md-3">
                      <% if (shifts[i].status==="approved" ) { %>
                        <label style="font-size: 18px;position:relative; left:35px;color:green"><span
                            style="color: #AAA;">Status : </span>
                          <%= shifts[i].status %>
                        </label>
                        <% } else { %>
                          <label style="font-size: 18px;position:relative; left:35px;color: rgb(230, 219, 116);"><span
                              style="color: #AAA;">Status : </span>
                            <%= shifts[i].status %>
                          </label>
                          <% } %>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4">
                      <label class="" style="font-size: 18px;">By: <%= shifts[i].employerId %></label>
                    </div>

                    <div class="col-md-4">
                      <label for="expertise" style="font-size: 18px;">Company : <%= shifts[i].company %></label>
                    </div>

                    <div class="col-md-4">
                      <div class="row">

                        <form action="/shifts" method="post" name="accept">

                          <button type="submit" class="btn btn-link btn-sm" id="<%= shifts[i]._id %>_acc"
                            style="display: inline-block;">
                            <i class="material-icons"
                              style="font-size: 24px; margin-left: 0.5rem;color: green;">check_circle_outline</i>
                          </button>

                          <input type="hidden" name="type" value="accept">
                          <input type="hidden" name="id" value="<%= shifts[i]._id %>">
                        </form>

                        <form action="/shifts" method="post" name="deny">
                          <button type="submit" rel="tooltip" title="Denied" class="btn btn-link btn-sm"
                            style="display:block;" id="<%= shifts[i]._id %>_den">
                            <i class="material-icons denied-btn"
                              style="font-size: 24px; margin-left: 0.5rem;color: red;">highlight_off</i>
                          </button>
                        </form>

                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-md-4" id='<%= shifts[i]._id %>_box' style="display: none;">
                <div class="card card-body text-center" style="border-radius: 15px;margin: 0;">

                  <form action="/shifts" method="post" name="accept">
                    <div class="row">
                      <div class="col">
                        <span style="font-size: 18px;">From :
                          <input type="time" name="<%= shifts[i]._id %>_from">
                        </span>
                      </div>
                      <div class="col">
                        <span style="font-size: 18px;">To :
                          <input type="time" name="<%= shifts[i]._id %>_to">
                        </span>
                      </div>
                    </div>
                  </form>
                  <div class="row">
                    <div class="col">
                      <button type="submit" class="update-btn btn btn-primary btn-sm"
                        style="font-size: 0.8rem;border-radius: 15px;" onclick="report()">Report</button>
                    </div>
                  </div>
                </div>
              </div>

            </div>
            <%}%>
        </div>
      </div>


      <footer class="footer">
        <div class="container-fluid">
          <nav class="float-left">
            <ul>
              <li>
                <a href="https://www.creative-tim.com">
                  GLEM TECH
                </a>
              </li>
              <li>
                <a href="https://creative-tim.com/presentation">
                  About Us
                </a>
              </li>
              <li>
                <a href="http://blog.creative-tim.com">
                  Blog
                </a>
              </li>
              <li>
                <a href="https://www.creative-tim.com/license">
                  Licenses
                </a>
              </li>
            </ul>
          </nav>
          <div class="copyright float-right" id="date">
            , made with <i class="material-icons">favorite</i> by
            <a href="https://www.creative-tim.com" target="_blank">GLEM TECH</a> for a better web.
          </div>
        </div>
      </footer>

      <script>
        const x = new Date().getFullYear();
        let date = document.getElementById('date');
        date.innerHTML = '&copy; ' + x + date.innerHTML;
      </script>

    </div>
  </div>
  <!--   Core JS Files   -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">  </script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="js/core/jquery.min.js"></script>
  <script src="js/core/popper.min.js"></script>
  <script src="js/core/bootstrap-material-design.min.js"></script>
  <script src="https://unpkg.com/default-passive-events"></script>
  <script src="js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <!-- Place this tag in your head or just before your close body tag. -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Chartist JS -->
  <script src="js/plugins/chartist.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="js/material-dashboard.js?v=2.1.0"></script>
  <!-- Material Dashboard DEMO methods, don't include it in your project! -->
  <script src="demo/demo.js"></script>
  <script>
    $(document).ready(function () {
      const user = getCookie("user")
      const identity = getCookie("identity")
      console.log(user.expertise);
      console.log(identity);

      const status = "<%= status %>"
      console.log(status);

      switch (status) {
        case "init":
          // swal({
          //   title: "Init \n",
          //   text: "",
          //   icon: "info",
          // });
          break;
        case "Success":
          swal({
            title: "Success \n",
            text: "If content has yet been changed - refresh page",
            icon: "success",
          });
          break;
        case "No Change":
          swal({
            title: "No change \n",
            text: "If content has yet been changed - refresh page",
            icon: "info",
          });
          break;
        case "Failed":
          swal({
            title: "Failed \n",
            text: "If content has yet been changed - refresh page",
            icon: "warning",
          });
          break;
        default:
          console.error("error");
          break;
      }

      if (identity === "Contractor_Users") {
        document.getElementById("recruit").style.display = "none";
        document.getElementById("trackingWorkers").style.display = "none";
        document.getElementById("statistics").style.display = "none";
        document.getElementById("searchWorker").style.display = "none";
        document.getElementById("hiringHistory").style.display = "none";
      }
      else if (identity === "HR_Users") {
        document.getElementById("shifts").style.display = "none";
        document.getElementById("workHistory").style.display = "none";
        document.getElementById("absences").style.display = "none";
        document.getElementById("userProfile").style.display = "none";
        document.getElementById("searchWorker").style.display = "none";
        document.getElementById("hiringHistory").style.display = "none";
      }
      else if (identity === "Employer_Users") {
        document.getElementById("shifts").style.display = "none";
        document.getElementById("workHistory").style.display = "none";
        document.getElementById("absences").style.display = "none";
        document.getElementById("userProfile").style.display = "none";
        document.getElementById("recruit").style.display = "none";
        document.getElementById("trackingWorkers").style.display = "none";
        document.getElementById("statistics").style.display = "none";
      }
    })
  </script>
  <script>
    function getCookie(name) {
      const value = "; " + document.cookie;
      const parts = value.split("; " + name + "=");
      if (parts.length == 2) {
        const vlu = parts.pop().split(";").shift();
        const decode_vlu = decodeURIComponent(vlu);
        const replace_vlu = decode_vlu.replace(/[+]/, ' ');
        const temp = replace_vlu.split(',')
        if (temp.length > 1)
          return JSON.parse(replace_vlu.replace("j:", ""));
        else
          return replace_vlu
      }
      else
        return '';
    }
  </script>

  <script>
    function accept(e) {
      alert(e)
      swal("Good job!", "You clicked the button!", "success", {
        button: "Aww yiss!",
      });
      document.getElementById(e + "_box").style.display = "inline";

      return false;
    }

    function report() {
      swal("Report", "You clicked the button!", "info");
      return true;
    }

  </script>
</body>

</html>